// Internationalization (i18n) for Riverman Website
const translations = {
    pt: {
        'nav.features': 'Recursos',
        'nav.download': 'Download',
        'hero.tagline': 'Navegador leve, rápido e experimental',
        'hero.description': 'Baseado em Chromium, desenvolvido para performance.<br>Para quem valoriza velocidade e eficiência.',
        'hero.download': 'Download',
        'hero.features': 'Ver Recursos',
        'features.title': 'Por que escolher o Riverman?',
        'features.fast.title': 'Ultra Rápido',
        'features.fast.desc': 'Inicialização instantânea e navegação fluida. Otimizado para máxima performance.',
        'features.experimental.title': 'Experimental',
        'features.experimental.desc': 'Recursos inovadores em constante desenvolvimento. Sempre à frente.',
        'features.chromium.title': 'Base Chromium',
        'features.chromium.desc': 'Compatível com todas as extensões do Chrome, sem o consumo excessivo de memória.',
        'features.lightweight.title': 'Leve e Limpo',
        'features.lightweight.desc': 'Sem recursos desnecessários. Apenas o essencial para uma navegação eficiente.',
        'download.title': 'Download',
        'download.subtitle': 'Escolha a versão ideal para você',
        'download.installer.title': 'Instalador',
        'download.installer.desc': 'Versão completa com instalação tradicional no sistema',
        'download.portable.desc': 'Execute de qualquer lugar, sem necessidade de instalação',
        'download.recommended': 'Recomendado',
        'download.requirements': 'Requisitos:',
        'download.minimum': 'mínimo',
        'download.recommended_ram': '8GB recomendado',
        'about.title': 'Sobre o Projeto',
        'about.description': 'Riverman foi criado para oferecer uma alternativa leve aos navegadores tradicionais. É experimental e focado em performance.'
    },
    en: {
        'nav.features': 'Features',
        'nav.download': 'Download',
        'hero.tagline': 'Lightweight, fast and experimental browser',
        'hero.description': 'Chromium-based, built for performance.<br>For those who value speed and efficiency.',
        'hero.download': 'Download',
        'hero.features': 'View Features',
        'features.title': 'Why choose Riverman?',
        'features.fast.title': 'Ultra Fast',
        'features.fast.desc': 'Instant startup and smooth browsing. Optimized for maximum performance.',
        'features.experimental.title': 'Experimental',
        'features.experimental.desc': 'Innovative features in constant development. Always ahead.',
        'features.chromium.title': 'Chromium Base',
        'features.chromium.desc': 'Compatible with all Chrome extensions, without excessive memory consumption.',
        'features.lightweight.title': 'Light and Clean',
        'features.lightweight.desc': 'No unnecessary features. Just the essentials for efficient browsing.',
        'download.title': 'Download',
        'download.subtitle': 'Choose the ideal version for you',
        'download.installer.title': 'Installer',
        'download.installer.desc': 'Full version with traditional system installation',
        'download.portable.desc': 'Run from anywhere, no installation required',
        'download.recommended': 'Recommended',
        'download.requirements': 'Requirements:',
        'download.minimum': 'minimum',
        'download.recommended_ram': '8GB recommended',
        'about.title': 'About the Project',
        'about.description': 'Riverman was created to offer a lightweight alternative to traditional browsers. It is experimental and focused on performance.'
    },
    es: {
        'nav.features': 'Características',
        'nav.download': 'Descargar',
        'hero.tagline': 'Navegador ligero, rápido y experimental',
        'hero.description': 'Basado en Chromium, desarrollado para rendimiento.<br>Para quienes valoran velocidad y eficiencia.',
        'hero.download': 'Descargar',
        'hero.features': 'Ver Características',
        'features.title': '¿Por qué elegir Riverman?',
        'features.fast.title': 'Ultra Rápido',
        'features.fast.desc': 'Inicio instantáneo y navegación fluida. Optimizado para máximo rendimiento.',
        'features.experimental.title': 'Experimental',
        'features.experimental.desc': 'Características innovadoras en constante desarrollo. Siempre adelante.',
        'features.chromium.title': 'Base Chromium',
        'features.chromium.desc': 'Compatible con todas las extensiones de Chrome, sin consumo excesivo de memoria.',
        'features.lightweight.title': 'Ligero y Limpio',
        'features.lightweight.desc': 'Sin características innecesarias. Solo lo esencial para una navegación eficiente.',
        'download.title': 'Descargar',
        'download.subtitle': 'Elige la versión ideal para ti',
        'download.installer.title': 'Instalador',
        'download.installer.desc': 'Versión completa con instalación tradicional en el sistema',
        'download.portable.desc': 'Ejecuta desde cualquier lugar, sin necesidad de instalación',
        'download.recommended': 'Recomendado',
        'download.requirements': 'Requisitos:',
        'download.minimum': 'mínimo',
        'download.recommended_ram': '8GB recomendado',
        'about.title': 'Sobre el Proyecto',
        'about.description': 'Riverman fue creado para ofrecer una alternativa ligera a los navegadores tradicionales. Es experimental y enfocado en rendimiento.'
    },
    zh: {
        'nav.features': '功能',
        'nav.download': '下载',
        'hero.tagline': '轻量级、快速、实验性浏览器',
        'hero.description': '基于Chromium，专为性能而设计。<br>为追求速度和效率的用户打造。',
        'hero.download': '下载',
        'hero.features': '查看功能',
        'features.title': '为什么选择Riverman？',
        'features.fast.title': '超快速度',
        'features.fast.desc': '即时启动，流畅浏览。优化以实现最佳性能。',
        'features.experimental.title': '实验性',
        'features.experimental.desc': '不断开发的创新功能。始终领先。',
        'features.chromium.title': 'Chromium内核',
        'features.chromium.desc': '兼容所有Chrome扩展，不会过度消耗内存。',
        'features.lightweight.title': '轻量简洁',
        'features.lightweight.desc': '没有不必要的功能。只保留高效浏览的必需品。',
        'download.title': '下载',
        'download.subtitle': '选择适合您的版本',
        'download.installer.title': '安装程序',
        'download.installer.desc': '完整版本，传统系统安装',
        'download.portable.desc': '随处运行，无需安装',
        'download.recommended': '推荐',
        'download.requirements': '系统要求：',
        'download.minimum': '最低',
        'download.recommended_ram': '推荐8GB',
        'about.title': '关于项目',
        'about.description': 'Riverman的创建是为了提供传统浏览器的轻量级替代品。它是实验性的，专注于性能。'
    }
};

let currentLang = 'pt';

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('riverman-lang', lang);
    
    // Update HTML lang attribute
    document.documentElement.lang = lang === 'zh' ? 'zh-CN' : lang;
    
    // Update all elements with data-i18n attribute
    // Note: Using innerHTML because some translations contain safe HTML tags (<a>, <br>)
    // All translations are hardcoded in this file, so XSS risk is minimal
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.innerHTML = translations[lang][key];
        }
    });
    
    // Update active state on language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });
}

// Initialize language selector
document.addEventListener('DOMContentLoaded', () => {
    // Get saved language or detect from browser
    const savedLang = localStorage.getItem('riverman-lang');
    const browserLang = navigator.language.slice(0, 2);
    const supportedLangs = ['pt', 'en', 'es', 'zh'];
    
    let initialLang = 'pt';
    if (savedLang && supportedLangs.includes(savedLang)) {
        initialLang = savedLang;
    } else if (supportedLangs.includes(browserLang)) {
        initialLang = browserLang;
    }
    
    setLanguage(initialLang);
    
    // Add click handlers to language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang');
            setLanguage(lang);
        });
    });
});
